(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-auth-register"],{"1c52":function(e,r,t){var a=t("b2b6");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=t("4f06").default;i("46bf6c8a",a,!0,{sourceMap:!1,shadowMode:!1})},"2d8e":function(e,r,t){"use strict";(function(e){var a=t("4ea4");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,t("96cf");var i=a(t("1da1")),n={data:function(){var e=function(e,r,t){var a=/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$/;if(a.test(r))return t();t(new Error("请输入合法邮箱"))};return{emailRegisterForm:{email:"",pwd:"",conpwd:"",code:""},emailRegisterRules:{email:[{required:!0,message:"请输入邮箱",trigger:["change","blur"]},{validator:e,trigger:["change","blur"]}],pwd:[{required:!0,message:"请输入密码",trigger:"change"},{min:6,message:"密码不能少于6位数",trigger:"blur"}],conpwd:[{required:!0,message:"请输入确认密码",trigger:"change"},{min:6,message:"密码不能少于6位数",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"change"},{min:4,message:"验证码位4位数",trigger:"blur"}]},verifyinfo:"发送验证码",disabled:!1,userRegisterForm:{username:"",pwd:"",conpwd:""},userRegisterRules:{username:[{required:!0,message:"请输入用户名",trigger:["change","blur"]}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码不能少于6位数",trigger:"blur"}],conpwd:[{required:!0,message:"请输入确认密码",trigger:"blur"},{min:6,message:"密码不能少于6位数",trigger:"blur"}]},showForm:""}},onLoad:function(e){this.showForm=e.type},onReady:function(){"email"===this.showForm?this.$refs.emailRegisterForm.setRules(this.emailRegisterRules):"user"===this.showForm&&this.$refs.userRegisterForm.setRules(this.userRegisterRules)},methods:{handleEmailRegister:function(){var e=this;this.$refs.emailRegisterForm.validate(function(){var r=(0,i.default)(regeneratorRuntime.mark((function r(t){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.emailRegisterForm,t){r.next=3;break}return r.abrupt("return");case 3:if(a.pwd===a.conpwd){r.next=5;break}return r.abrupt("return",e.$util.msg("两次密码输入不一致"));case 5:return r.next=7,e.$request({method:"post",url:"/user/email/register",data:a});case 7:if(i=r.sent,1e4!==i.code){r.next=10;break}return r.abrupt("return",e.$util.msg("该邮箱已被使用"));case 10:if(500!==i.code){r.next=12;break}return r.abrupt("return",e.$util.msg("邮箱验证码错误"));case 12:0===i.code&&e.registerSuccessCallBack(a);case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},getVerify:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function r(){var t,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t=e.emailRegisterForm.email,!e.disabled){r.next=3;break}return r.abrupt("return");case 3:if(a=/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$/,a.test(t)){r.next=6;break}return r.abrupt("return",e.$util.msg("请输入正确邮箱"));case 6:return r.next=8,e.$request({url:"/verification/mail/get",data:{mail:t}});case 8:if(i=r.sent,0===i.code){r.next=11;break}return r.abrupt("return",e.$util.msg("验证码发送失败"));case 11:e.$util.msg("验证码发送成功"),e.countDown();case 13:case"end":return r.stop()}}),r)})))()},countDown:function(){var e=this;this.disabled=!0;var r=60;this.verifyinfo="(".concat(r,")秒后可发送");var t=setInterval((function(){r--,e.verifyinfo="(".concat(r,")秒后可发送"),0==r&&(e.disabled=!1,r=60,e.verifyinfo="获取验证码",clearInterval(t))}),1e3)},handleUserRegister:function(){var r=this;this.$refs.userRegisterForm.validate(function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(a){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=r.userRegisterForm,a){t.next=3;break}return t.abrupt("return");case 3:if(i.pwd===i.conpwd){t.next=5;break}return t.abrupt("return",r.$util.msg("两次密码输入不一致"));case 5:return t.next=7,r.$request({method:"post",url:"/user/username/register",data:i});case 7:if(n=t.sent,e.log(n),1e4!==n.code){t.next=11;break}return t.abrupt("return",r.$util.msg("用户名已被使用"));case 11:0===n.code&&r.registerSuccessCallBack(i);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},registerSuccessCallBack:function(e){var r=this;this.$util.msg("注册成功"),setTimeout((function(){"user"===r.showForm?uni.navigateTo({url:"login?username=".concat(e.username)}):uni.navigateTo({url:"login?email=".concat(e.email)})}),1e3)}}};r.default=n}).call(this,t("5a52")["default"])},"55fd":function(e,r,t){"use strict";var a=t("1c52"),i=t.n(a);i.a},"7f5d":function(e,r,t){"use strict";t.r(r);var a=t("2d8e"),i=t.n(a);for(var n in a)"default"!==n&&function(e){t.d(r,e,(function(){return a[e]}))}(n);r["default"]=i.a},b2b6:function(e,r,t){var a=t("24fb");r=a(!1),r.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* uni.scss */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.wrapper[data-v-277fdd00]{position:relative;z-index:100\r\n  /* 其他登录方式 */}.wrapper .welcome[data-v-277fdd00]{position:absolute;left:%?50?%;top:%?60?%;font-size:%?50?%;color:#555}.wrapper .input-content[data-v-277fdd00]{padding:0 %?50?%}.wrapper .other-wrapper[data-v-277fdd00]{padding-top:%?20?%;margin-top:%?50?%}.wrapper .other-wrapper .list[data-v-277fdd00]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.wrapper .other-wrapper .list .item[data-v-277fdd00]{margin-top:%?30?%}.wrapper .other-wrapper .list .item .icon[data-v-277fdd00]{width:%?80?%;height:%?80?%;margin:0 %?24?% %?16?%}.left_top_sign[data-v-277fdd00]{font-size:%?120?%;color:#efefef;position:relative;left:%?-12?%}.agreement[data-v-277fdd00]{position:absolute;bottom:6vh;width:100vw;text-align:center}.agreement .tit[data-v-277fdd00]{color:#40a2ff;font-size:%?24?%}',""]),e.exports=r},d2d2:function(e,r,t){"use strict";t.d(r,"b",(function(){return i})),t.d(r,"c",(function(){return n})),t.d(r,"a",(function(){return a}));var a={uForm:t("0d26").default,uFormItem:t("2edf").default,uInput:t("78c4").default,uButton:t("297b").default},i=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-uni-view",[t("v-uni-view",{staticClass:"wrapper"},["email"===e.showForm?t("v-uni-view",{staticClass:"input-content"},[t("v-uni-view",{staticClass:"left_top_sign"},[e._v("register")]),t("v-uni-view",{staticClass:"welcome"},[e._v("邮箱注册")]),t("u-form",{ref:"emailRegisterForm",attrs:{model:e.emailRegisterForm,"label-width":"0"}},[t("u-form-item",{attrs:{prop:"email"}},[t("u-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.emailRegisterForm.email,callback:function(r){e.$set(e.emailRegisterForm,"email",r)},expression:"emailRegisterForm.email"}})],1),t("u-form-item",{attrs:{prop:"pwd"}},[t("u-input",{attrs:{maxlength:"16",type:"password",placeholder:"请输入密码"},model:{value:e.emailRegisterForm.pwd,callback:function(r){e.$set(e.emailRegisterForm,"pwd",r)},expression:"emailRegisterForm.pwd"}})],1),t("u-form-item",{attrs:{prop:"conpwd"}},[t("u-input",{attrs:{maxlength:"16",type:"password",placeholder:"确认密码"},model:{value:e.emailRegisterForm.conpwd,callback:function(r){e.$set(e.emailRegisterForm,"conpwd",r)},expression:"emailRegisterForm.conpwd"}})],1),t("u-form-item",{attrs:{prop:"code"}},[t("u-input",{attrs:{maxlength:"4",type:"number",placeholder:"请输入验证码"},model:{value:e.emailRegisterForm.code,callback:function(r){e.$set(e.emailRegisterForm,"code",r)},expression:"emailRegisterForm.code"}}),t("u-button",{attrs:{slot:"right","custom-style":{width:"200rpx"},plain:!0,size:"medium",disabled:!!e.disabled},on:{click:function(r){arguments[0]=r=e.$handleEvent(r),e.getVerify.apply(void 0,arguments)}},slot:"right"},[e._v(e._s(e.verifyinfo))])],1)],1),t("u-button",{attrs:{"custom-style":{marginTop:"40rpx",height:"90rpx"},ripple:!0,shape:"circle",type:"error"},on:{click:function(r){arguments[0]=r=e.$handleEvent(r),e.handleEmailRegister.apply(void 0,arguments)}}},[e._v("立即注册")])],1):e._e(),"user"===e.showForm?t("v-uni-view",{staticClass:"input-content"},[t("v-uni-view",{staticClass:"left_top_sign"},[e._v("useregister")]),t("v-uni-view",{staticClass:"welcome"},[e._v("用户名注册")]),t("u-form",{ref:"userRegisterForm",attrs:{model:e.userRegisterForm,"label-width":"0"}},[t("u-form-item",{attrs:{prop:"username"}},[t("u-input",{attrs:{maxlength:"12",placeholder:"请输入用户名"},model:{value:e.userRegisterForm.username,callback:function(r){e.$set(e.userRegisterForm,"username",r)},expression:"userRegisterForm.username"}})],1),t("u-form-item",{attrs:{prop:"pwd"}},[t("u-input",{attrs:{maxlength:"16",type:"password",placeholder:"请输入密码"},model:{value:e.userRegisterForm.pwd,callback:function(r){e.$set(e.userRegisterForm,"pwd",r)},expression:"userRegisterForm.pwd"}})],1),t("u-form-item",{attrs:{prop:"conpwd"}},[t("u-input",{attrs:{maxlength:"16",type:"password",placeholder:"确认密码"},model:{value:e.userRegisterForm.conpwd,callback:function(r){e.$set(e.userRegisterForm,"conpwd",r)},expression:"userRegisterForm.conpwd"}})],1)],1),t("u-button",{attrs:{"custom-style":{marginTop:"40rpx",height:"90rpx"},ripple:!0,shape:"circle",type:"error"},on:{click:function(r){arguments[0]=r=e.$handleEvent(r),e.handleUserRegister.apply(void 0,arguments)}}},[e._v("立即注册")])],1):e._e()],1)],1)},n=[]},f22e:function(e,r,t){"use strict";t.r(r);var a=t("d2d2"),i=t("7f5d");for(var n in i)"default"!==n&&function(e){t.d(r,e,(function(){return i[e]}))}(n);t("55fd");var s,o=t("f0c5"),u=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"277fdd00",null,!1,a["a"],s);r["default"]=u.exports}}]);